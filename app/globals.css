@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===============================================
 * ACCESSIBILITY STYLES
 * =============================================== */

/* Screen Reader Only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* High Contrast Mode */
.high-contrast {
  --color-primary: #000000;
  --color-secondary: #ffffff;
  --color-accent: #0066cc;
  --color-text: #000000;
  --color-background: #ffffff;
  --color-border: #000000;
}

.high-contrast * {
  color: var(--color-text) !important;
  background-color: var(--color-background) !important;
  border-color: var(--color-border) !important;
}

.high-contrast button,
.high-contrast input,
.high-contrast select,
.high-contrast textarea {
  border: 2px solid var(--color-border) !important;
  background-color: var(--color-background) !important;
  color: var(--color-text) !important;
}

.high-contrast a {
  color: var(--color-accent) !important;
  text-decoration: underline !important;
}

.high-contrast a:hover,
.high-contrast a:focus {
  background-color: var(--color-accent) !important;
  color: var(--color-background) !important;
}

/* Reduced Motion */
.reduced-motion *,
.reduced-motion *::before,
.reduced-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* Font Size Options */
.font-small {
  font-size: 14px;
}

.font-medium {
  font-size: 16px;
}

.font-large {
  font-size: 18px;
}

.font-xlarge {
  font-size: 20px;
}

/* Keyboard Navigation */
.keyboard-navigation-active *:focus {
  outline: 2px solid #0066cc !important;
  outline-offset: 2px !important;
}

.keyboard-navigation button:focus,
.keyboard-navigation input:focus,
.keyboard-navigation select:focus,
.keyboard-navigation textarea:focus,
.keyboard-navigation a:focus {
  box-shadow: 0 0 0 2px #0066cc !important;
}

/* Screen Reader Optimization */
.screen-reader-optimized {
  line-height: 1.6;
}

.screen-reader-optimized h1,
.screen-reader-optimized h2,
.screen-reader-optimized h3,
.screen-reader-optimized h4,
.screen-reader-optimized h5,
.screen-reader-optimized h6 {
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

.screen-reader-optimized p {
  margin-bottom: 1em;
}

.screen-reader-optimized ul,
.screen-reader-optimized ol {
  margin-bottom: 1em;
  padding-left: 2em;
}

.screen-reader-optimized li {
  margin-bottom: 0.25em;
}

/* Skip Navigation Link */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #000;
  color: #fff;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 100;
}

.skip-link:focus {
  top: 6px;
}

/* Focus Management */
.focus-visible {
  outline: 2px solid #0066cc;
  outline-offset: 2px;
}

/* ===============================================
 * GDPR COMPLIANCE STYLES
 * =============================================== */

/* Cookie Consent Banner */
.cookie-consent-banner {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: white;
  border-top: 1px solid #e5e7eb;
  box-shadow: 0 -4px 6px -1px rgba(0, 0, 0, 0.1);
  z-index: 1000;
}

.cookie-consent-banner.dark {
  background: #1f2937;
  border-top-color: #374151;
}

/* Privacy Notice */
.privacy-notice {
  background: #f3f4f6;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  padding: 16px;
  margin: 16px 0;
}

.privacy-notice.dark {
  background: #374151;
  border-color: #4b5563;
}

.privacy-notice h3 {
  margin-top: 0;
  margin-bottom: 8px;
  font-weight: 600;
  color: #1f2937;
}

.privacy-notice.dark h3 {
  color: #f9fafb;
}

.privacy-notice p {
  margin-bottom: 8px;
  color: #6b7280;
}

.privacy-notice.dark p {
  color: #d1d5db;
}

/* Data Processing Indicators */
.data-processing-indicator {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 12px;
  font-weight: 500;
}

.data-processing-indicator.essential {
  background: #dbeafe;
  color: #1e40af;
}

.data-processing-indicator.optional {
  background: #fef3c7;
  color: #92400e;
}

.data-processing-indicator.restricted {
  background: #fee2e2;
  color: #dc2626;
}

/* ===============================================
 * RESPONSIVE ACCESSIBILITY
 * =============================================== */

/* Mobile Accessibility */
@media (max-width: 768px) {
  .accessibility-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 1000;
  }

  .cookie-consent-banner {
    padding: 16px;
  }

  .font-small {
    font-size: 16px;
  }

  .font-medium {
    font-size: 18px;
  }

  .font-large {
    font-size: 20px;
  }

  .font-xlarge {
    font-size: 22px;
  }
}

/* Tablet Accessibility */
@media (min-width: 769px) and (max-width: 1024px) {
  .accessibility-widget {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 1000;
  }
}

/* Desktop Accessibility */
@media (min-width: 1025px) {
  .accessibility-widget {
    position: fixed;
    bottom: 32px;
    right: 32px;
    z-index: 1000;
  }
}

/* ===============================================
 * PRINT STYLES
 * =============================================== */

@media print {
  .accessibility-widget,
  .cookie-consent-banner {
    display: none !important;
  }

  .privacy-notice {
    background: transparent !important;
    border: 1px solid #000 !important;
    color: #000 !important;
  }

  .privacy-notice * {
    color: #000 !important;
  }
}

/* ===============================================
 * DARK MODE SUPPORT
 * =============================================== */

@media (prefers-color-scheme: dark) {
  .high-contrast {
    --color-primary: #ffffff;
    --color-secondary: #000000;
    --color-accent: #66b3ff;
    --color-text: #ffffff;
    --color-background: #000000;
    --color-border: #ffffff;
  }
}

/* ===============================================
 * LEGACY BROWSER SUPPORT
 * =============================================== */

/* IE11 Support */
@supports not (display: grid) {
  .accessibility-widget {
    position: fixed;
    bottom: 20px;
    right: 20px;
  }

  .cookie-consent-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
  }
}

/* ===============================================
 * ANIMATION PREFERENCES
 * =============================================== */

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Respect user's contrast preferences */
@media (prefers-contrast: high) {
  * {
    border-color: #000 !important;
  }

  button,
  input,
  select,
  textarea {
    border: 2px solid #000 !important;
  }
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }
  .dark {
    /* Solarized Dark Theme */
    --background: 192 100% 11%;        /* base03: #002b36 - darkest background */
    --foreground: 186 13% 75%;         /* base1: #93a1a1 - primary content */
    --card: 193 100% 13%;              /* base02: #073642 - card background */
    --card-foreground: 186 13% 75%;    /* base1: #93a1a1 - card text */
    --popover: 193 100% 13%;           /* base02: #073642 - popover background */
    --popover-foreground: 186 13% 75%; /* base1: #93a1a1 - popover text */
    --primary: 205 69% 67%;            /* blue: #268bd2 - primary actions */
    --primary-foreground: 44 11% 93%;  /* base3: #fdf6e3 - text on primary */
    --secondary: 192 90% 21%;          /* base01: #586e75 - secondary background */
    --secondary-foreground: 186 13% 75%; /* base1: #93a1a1 - secondary text */
    --muted: 192 90% 21%;              /* base01: #586e75 - muted background */
    --muted-foreground: 44 87% 94%;    /* base0: #839496 - muted text */
    --accent: 68 100% 30%;             /* green: #859900 - accent color */
    --accent-foreground: 44 11% 93%;   /* base3: #fdf6e3 - text on accent */
    --destructive: 1 71% 52%;          /* red: #dc322f - destructive actions */
    --destructive-foreground: 44 11% 93%; /* base3: #fdf6e3 - text on destructive */
    --border: 192 81% 27%;             /* base01 lighter - borders */
    --input: 192 81% 27%;              /* base01 lighter - input borders */
    --ring: 205 69% 67%;               /* blue: #268bd2 - focus rings */
    --chart-1: 205 69% 67%;            /* blue: #268bd2 */
    --chart-2: 175 74% 63%;            /* cyan: #2aa198 */
    --chart-3: 68 100% 30%;            /* green: #859900 */
    --chart-4: 45 100% 51%;            /* yellow: #b58900 */
    --chart-5: 18 89% 60%;             /* orange: #cb4b16 */
  }

  /* ===============================================
   * MULTI-THEME SUPPORT
   * Each theme defines the same semantic variables
   * =============================================== */

  /* Solarized Light */
  [data-theme="solarized-light"] {
    --background: 44 11% 93%;        /* base3: #fdf6e3 - light background */
    --foreground: 192 100% 11%;      /* base03: #002b36 - dark text */
    --card: 44 87% 94%;              /* base2: #eee8d5 - slightly darker bg */
    --card-foreground: 192 100% 11%; /* base03: #002b36 - dark text */
    --popover: 44 87% 94%;           /* base2: #eee8d5 */
    --popover-foreground: 192 100% 11%; /* base03: #002b36 - dark text */
    --primary: 205 69% 67%;          /* blue: #268bd2 */
    --primary-foreground: 44 11% 93%; /* base3: #fdf6e3 - light text on blue */
    --secondary: 44 87% 94%;         /* base2: #eee8d5 - slightly darker bg */
    --secondary-foreground: 192 100% 11%; /* base03: #002b36 - dark text */
    --muted: 44 87% 94%;             /* base2: #eee8d5 - muted background */
    --muted-foreground: 186 8% 60%;  /* base1: #93a1a1 - medium dark text */
    --accent: 68 100% 30%;           /* green: #859900 */
    --accent-foreground: 44 11% 93%; /* base3: #fdf6e3 - light text on green */
    --destructive: 1 71% 52%;        /* red: #dc322f */
    --destructive-foreground: 44 11% 93%; /* base3: #fdf6e3 - light text on red */
    --border: 192 13% 45%;           /* base0: #839496 - visible border */
    --input: 192 13% 45%;            /* base0: #839496 - visible input border */
    --ring: 205 69% 67%;             /* blue: #268bd2 - focus ring */
    /* Glass effect variables */
    --glass-tint: 205 69% 67%;       /* Blue tint for glass */
    --glass-glow-color: 205 69% 67%;
    --glass-opacity: 0.88;           /* Higher opacity for light themes */
    --glass-opacity-subtle: 0.92;
  }

  /* Solarized Dark */
  [data-theme="solarized-dark"] {
    --background: 192 100% 11%;        /* base03: #002b36 */
    --foreground: 186 13% 75%;         /* base1: #93a1a1 */
    --card: 193 100% 13%;              /* base02: #073642 */
    --card-foreground: 186 13% 75%;    /* base1: #93a1a1 */
    --popover: 193 100% 13%;           /* base02: #073642 */
    --popover-foreground: 186 13% 75%; /* base1: #93a1a1 */
    --primary: 205 69% 67%;            /* blue: #268bd2 */
    --primary-foreground: 44 11% 93%;  /* base3: #fdf6e3 */
    --secondary: 192 90% 21%;          /* base01: #586e75 */
    --secondary-foreground: 186 13% 75%; /* base1: #93a1a1 */
    --muted: 192 90% 21%;              /* base01: #586e75 */
    --muted-foreground: 44 87% 94%;    /* base0: #839496 */
    --accent: 68 100% 30%;             /* green: #859900 */
    --accent-foreground: 44 11% 93%;   /* base3: #fdf6e3 */
    --destructive: 1 71% 52%;          /* red: #dc322f */
    --destructive-foreground: 44 11% 93%; /* base3: #fdf6e3 */
    --border: 192 81% 27%;             /* base01 lighter */
    --input: 192 81% 27%;              /* base01 lighter */
    --ring: 205 69% 67%;               /* blue: #268bd2 */
    /* Glass effect variables */
    --glass-tint: 205 69% 67%;         /* Blue tint - cool, professional */
    --glass-glow-color: 205 69% 67%;
  }

  /* Gruvbox Light */
  [data-theme="gruvbox-light"] {
    --background: 48 87% 94%;        /* #fbf1c7 */
    --foreground: 25 18% 23%;        /* #3c3836 */
    --card: 36 65% 90%;              /* #ebdbb2 */
    --card-foreground: 25 18% 23%;   /* #3c3836 */
    --popover: 36 65% 90%;           /* #ebdbb2 */
    --popover-foreground: 25 18% 23%; /* #3c3836 */
    --primary: 39 83% 49%;           /* #d79921 */
    --primary-foreground: 48 87% 94%; /* #fbf1c7 */
    --secondary: 36 65% 90%;         /* #ebdbb2 */
    --secondary-foreground: 25 18% 23%; /* #3c3836 */
    --muted: 36 46% 76%;             /* #d5c4a1 */
    --muted-foreground: 25 43% 35%;  /* #504945 */
    --accent: 142 60% 40%;           /* #98971a */
    --accent-foreground: 48 87% 94%; /* #fbf1c7 */
    --destructive: 4 69% 55%;        /* #cc241d */
    --destructive-foreground: 48 87% 94%; /* #fbf1c7 */
    --border: 36 46% 76%;            /* #d5c4a1 */
    --input: 36 46% 76%;             /* #d5c4a1 */
    --ring: 39 83% 49%;              /* #d79921 */
    /* Glass effect variables */
    --glass-tint: 39 83% 49%;        /* Orange/yellow - warm retro */
    --glass-glow-color: 39 83% 49%;
    --glass-opacity: 0.88;           /* Higher opacity for light themes */
    --glass-opacity-subtle: 0.92;
  }

  /* Gruvbox Dark */
  [data-theme="gruvbox-dark"] {
    --background: 25 18% 16%;        /* #282828 */
    --foreground: 36 65% 90%;        /* #ebdbb2 */
    --card: 25 43% 20%;              /* #3c3836 */
    --card-foreground: 36 65% 90%;   /* #ebdbb2 */
    --popover: 25 43% 20%;           /* #3c3836 */
    --popover-foreground: 36 65% 90%; /* #ebdbb2 */
    --primary: 39 100% 58%;          /* #fabd2f */
    --primary-foreground: 25 18% 16%; /* #282828 */
    --secondary: 25 43% 20%;         /* #3c3836 */
    --secondary-foreground: 36 65% 90%; /* #ebdbb2 */
    --muted: 25 43% 35%;             /* #504945 */
    --muted-foreground: 36 46% 76%;  /* #d5c4a1 */
    --accent: 142 60% 40%;           /* #98971a */
    --accent-foreground: 25 18% 16%; /* #282828 */
    --destructive: 4 90% 58%;        /* #fb4934 */
    --destructive-foreground: 36 65% 90%; /* #ebdbb2 */
    --border: 25 43% 35%;            /* #504945 */
    --input: 25 43% 35%;             /* #504945 */
    --ring: 39 100% 58%;             /* #fabd2f */
    /* Glass effect variables */
    --glass-tint: 39 100% 58%;       /* Yellow/orange - warm retro */
    --glass-glow-color: 39 100% 58%;
  }

  /* Nord */
  [data-theme="nord"] {
    --background: 220 16% 22%;       /* #2e3440 */
    --foreground: 219 28% 88%;       /* #d8dee9 */
    --card: 220 17% 28%;             /* #3b4252 */
    --card-foreground: 219 28% 88%;  /* #d8dee9 */
    --popover: 220 17% 28%;          /* #3b4252 */
    --popover-foreground: 219 28% 88%; /* #d8dee9 */
    --primary: 193 43% 67%;          /* #88c0d0 */
    --primary-foreground: 220 16% 22%; /* #2e3440 */
    --secondary: 220 17% 28%;        /* #3b4252 */
    --secondary-foreground: 219 28% 88%; /* #d8dee9 */
    --muted: 220 16% 36%;            /* #434c5e */
    --muted-foreground: 218 27% 92%; /* #eceff4 */
    --accent: 179 25% 65%;           /* #8fbcbb */
    --accent-foreground: 220 16% 22%; /* #2e3440 */
    --destructive: 354 42% 56%;      /* #bf616a */
    --destructive-foreground: 219 28% 88%; /* #d8dee9 */
    --border: 220 16% 36%;           /* #434c5e */
    --input: 220 16% 36%;            /* #434c5e */
    --ring: 193 43% 67%;             /* #88c0d0 */
    /* Glass effect variables */
    --glass-tint: 193 43% 67%;       /* Frost blue - arctic feel */
    --glass-glow-color: 179 25% 65%; /* Teal accent glow */
  }

  /* Dracula */
  [data-theme="dracula"] {
    --background: 231 15% 18%;       /* #282a36 */
    --foreground: 60 30% 96%;        /* #f8f8f2 */
    --card: 232 14% 31%;             /* #44475a */
    --card-foreground: 60 30% 96%;   /* #f8f8f2 */
    --popover: 232 14% 31%;          /* #44475a */
    --popover-foreground: 60 30% 96%; /* #f8f8f2 */
    --primary: 265 89% 78%;          /* #bd93f9 */
    --primary-foreground: 231 15% 18%; /* #282a36 */
    --secondary: 232 14% 31%;        /* #44475a */
    --secondary-foreground: 60 30% 96%; /* #f8f8f2 */
    --muted: 230 15% 36%;            /* #6272a4 */
    --muted-foreground: 60 30% 96%;  /* #f8f8f2 */
    --accent: 135 94% 65%;           /* #50fa7b */
    --accent-foreground: 231 15% 18%; /* #282a36 */
    --destructive: 0 100% 67%;       /* #ff5555 */
    --destructive-foreground: 60 30% 96%; /* #f8f8f2 */
    --border: 230 15% 36%;           /* #6272a4 */
    --input: 230 15% 36%;            /* #6272a4 */
    --ring: 265 89% 78%;             /* #bd93f9 */
    /* Glass effect variables */
    --glass-tint: 265 89% 78%;       /* Purple - vibrant, energetic */
    --glass-glow-color: 265 89% 78%;
  }

  /* Catppuccin Mocha */
  [data-theme="catppuccin-mocha"] {
    --background: 240 21% 15%;       /* #1e1e2e */
    --foreground: 226 64% 88%;       /* #cdd6f4 */
    --card: 237 16% 23%;             /* #313244 */
    --card-foreground: 226 64% 88%;  /* #cdd6f4 */
    --popover: 237 16% 23%;          /* #313244 */
    --popover-foreground: 226 64% 88%; /* #cdd6f4 */
    --primary: 217 92% 76%;          /* #89b4fa */
    --primary-foreground: 240 21% 15%; /* #1e1e2e */
    --secondary: 237 16% 23%;        /* #313244 */
    --secondary-foreground: 226 64% 88%; /* #cdd6f4 */
    --muted: 233 12% 39%;            /* #585b70 */
    --muted-foreground: 227 68% 88%; /* #bac2de */
    --accent: 189 71% 73%;           /* #89dceb */
    --accent-foreground: 240 21% 15%; /* #1e1e2e */
    --destructive: 343 81% 75%;      /* #f38ba8 */
    --destructive-foreground: 240 21% 15%; /* #1e1e2e */
    --border: 233 12% 39%;           /* #585b70 */
    --input: 233 12% 39%;            /* #585b70 */
    --ring: 217 92% 76%;             /* #89b4fa */
    /* Glass effect variables */
    --glass-tint: 217 92% 76%;       /* Blue - soft pastel */
    --glass-glow-color: 189 71% 73%; /* Sky teal glow */
  }

  /* Tokyo Night */
  [data-theme="tokyo-night"] {
    --background: 235 18% 13%;       /* #1a1b26 */
    --foreground: 224 16% 74%;       /* #a9b1d6 */
    --card: 235 23% 21%;             /* #24283b */
    --card-foreground: 224 16% 74%;  /* #a9b1d6 */
    --popover: 235 23% 21%;          /* #24283b */
    --popover-foreground: 224 16% 74%; /* #a9b1d6 */
    --primary: 217 92% 76%;          /* #7aa2f7 */
    --primary-foreground: 235 18% 13%; /* #1a1b26 */
    --secondary: 235 23% 21%;        /* #24283b */
    --secondary-foreground: 224 16% 74%; /* #a9b1d6 */
    --muted: 235 18% 24%;            /* #292e42 */
    --muted-foreground: 223 18% 85%; /* #c0caf5 */
    --accent: 172 67% 60%;           /* #7dcfff */
    --accent-foreground: 235 18% 13%; /* #1a1b26 */
    --destructive: 3 87% 67%;        /* #f7768e */
    --destructive-foreground: 235 18% 13%; /* #1a1b26 */
    --border: 235 18% 24%;           /* #292e42 */
    --input: 235 18% 24%;            /* #292e42 */
    --ring: 217 92% 76%;             /* #7aa2f7 */
    /* Glass effect variables */
    --glass-tint: 217 92% 76%;       /* Blue - neon city vibe */
    --glass-glow-color: 172 67% 60%; /* Cyan glow */
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* ===============================================
 * MOBILE-FIRST UTILITIES
 * =============================================== */

/* Prevent horizontal scroll on all elements */
html,
body {
  overflow-x: hidden;
  width: 100%;
}

/* iOS Safe Area Support */
:root {
  --sat: env(safe-area-inset-top);
  --sar: env(safe-area-inset-right);
  --sab: env(safe-area-inset-bottom);
  --sal: env(safe-area-inset-left);
}

/* Safe area utilities */
.pt-safe {
  padding-top: env(safe-area-inset-top);
}

.pr-safe {
  padding-right: env(safe-area-inset-right);
}

.pb-safe {
  padding-bottom: env(safe-area-inset-bottom);
}

.pl-safe {
  padding-left: env(safe-area-inset-left);
}

/* Combined safe areas */
.p-safe {
  padding-top: env(safe-area-inset-top);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
}

.px-safe {
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

.py-safe {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
}

/* Mobile Touch Targets (minimum 44x44px for accessibility) */
.touch-target {
  min-width: 44px;
  min-height: 44px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Prevent text selection on tap (for button-like elements) */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
}

/* Mobile-friendly scrolling */
.smooth-scroll {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* Hide scrollbars on mobile but keep functionality */
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Mobile backdrop blur support */
@supports (backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px)) {
  .mobile-blur {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
}

/* Pull-to-refresh prevention on overscroll */
body {
  overscroll-behavior-y: contain;
}

/* Mobile-optimized transitions */
@media (prefers-reduced-motion: no-preference) {
  .mobile-transition {
    transition-property: transform, opacity;
    transition-duration: 200ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* Responsive text sizing utility classes */
.text-mobile-xs {
  font-size: 0.75rem; /* 12px */
  line-height: 1rem;
}

.text-mobile-sm {
  font-size: 0.875rem; /* 14px */
  line-height: 1.25rem;
}

.text-mobile-base {
  font-size: 1rem; /* 16px */
  line-height: 1.5rem;
}

.text-mobile-lg {
  font-size: 1.125rem; /* 18px */
  line-height: 1.75rem;
}

.text-mobile-xl {
  font-size: 1.25rem; /* 20px */
  line-height: 1.75rem;
}

/* Compact spacing utilities */
.compact-p {
  padding: 0.75rem; /* 12px */
}

.compact-px {
  padding-left: 0.75rem;
  padding-right: 0.75rem;
}

.compact-py {
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
}

.compact-gap {
  gap: 0.75rem;
}

/* Mobile-specific z-index layers */
:root {
  --z-mobile-bottom-nav: 40;
  --z-mobile-header: 30;
  --z-mobile-overlay: 50;
  --z-mobile-modal: 60;
}

/* ===============================================
 * LIQUID GLASS SYSTEM - MOBILE-FIRST
 * Glass effects as orthogonal layer on top of themes
 * =============================================== */

:root {
  /* === MOBILE DEFAULTS (base) === */
  
  /* Lighter blur for mobile performance */
  --glass-blur-subtle: 4px;
  --glass-blur: 8px;
  --glass-blur-strong: 12px;
  
  /* Higher opacity = better performance + readability on small screens */
  --glass-opacity: 0.85;
  --glass-opacity-subtle: 0.9;
  --glass-opacity-strong: 0.75;
  
  /* Reduced glow for battery life */
  --glass-glow-opacity: 0.08;
  --glass-glow-spread: 10px;
  
  /* Touch-friendly borders (more visible) */
  --glass-border-width: 1px;
  --glass-border-opacity: 0.25;
  
  /* Reduced specular for simplicity */
  --glass-highlight-opacity: 0.05;
  --glass-highlight-size: 50%;
  
  /* Default tint colors (overridden per theme) */
  --glass-tint: 0 0% 50%;
  --glass-glow-color: 0 0% 50%;
  --glass-highlight: 0 0% 100%;
}

/* === TABLET ENHANCEMENT (640px+) === */
@media (min-width: 640px) {
  :root {
    --glass-blur-subtle: 6px;
    --glass-blur: 10px;
    --glass-blur-strong: 16px;
    
    --glass-opacity: 0.8;
    --glass-opacity-subtle: 0.88;
    --glass-opacity-strong: 0.7;
    
    --glass-glow-opacity: 0.12;
    --glass-glow-spread: 15px;
    
    --glass-highlight-opacity: 0.08;
  }
}

/* === DESKTOP ENHANCEMENT (1024px+) === */
@media (min-width: 1024px) {
  :root {
    --glass-blur-subtle: 8px;
    --glass-blur: 12px;
    --glass-blur-strong: 20px;
    
    --glass-opacity: 0.75;
    --glass-opacity-subtle: 0.85;
    --glass-opacity-strong: 0.6;
    
    --glass-glow-opacity: 0.15;
    --glass-glow-spread: 20px;
    
    --glass-highlight-opacity: 0.1;
  }
}

/* === LARGE DESKTOP (1280px+) === */
@media (min-width: 1280px) {
  :root {
    --glass-blur-strong: 24px;
    --glass-glow-spread: 25px;
  }
}

/* === PWA STANDALONE MODE ENHANCEMENT === */
@media (display-mode: standalone) {
  :root {
    /* PWA users expect app-like experience - slightly enhanced effects */
    --glass-glow-opacity: calc(var(--glass-glow-opacity) * 1.15);
  }
}

/* === LANDSCAPE MOBILE OPTIMIZATION === */
@media (max-width: 640px) and (orientation: landscape) {
  :root {
    --glass-blur: 6px;
    --glass-opacity: 0.9;
  }
}

/* ===============================================
 * GLASS UTILITY CLASSES
 * Only active when .glass-enabled is on <html>
 * =============================================== */

/* Feature detection: Only apply blur if supported */
@supports (backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px)) {
  /* Basic glass surface */
  .glass-enabled .glass {
    background: hsla(var(--glass-tint) / var(--glass-opacity));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border-width) solid hsla(var(--glass-tint) / var(--glass-border-opacity));
  }

  /* Subtle glass - lighter effect */
  .glass-enabled .glass-subtle {
    background: hsla(var(--glass-tint) / var(--glass-opacity-subtle));
    backdrop-filter: blur(var(--glass-blur-subtle));
    -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
    border: var(--glass-border-width) solid hsla(var(--glass-tint) / calc(var(--glass-border-opacity) * 0.5));
  }

  /* Strong glass - more blur and transparency */
  .glass-enabled .glass-strong {
    background: hsla(var(--glass-tint) / var(--glass-opacity-strong));
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
    border: var(--glass-border-width) solid hsla(var(--glass-tint) / calc(var(--glass-border-opacity) * 1.5));
  }

  /* Full glass with glow and specular highlight */
  .glass-enabled .glass-full {
    background: hsla(var(--glass-tint) / var(--glass-opacity));
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border-width) solid hsla(var(--glass-tint) / var(--glass-border-opacity));
    box-shadow: 
      0 0 var(--glass-glow-spread) hsla(var(--glass-glow-color) / var(--glass-glow-opacity)),
      0 8px 32px rgba(0, 0, 0, 0.12);
    position: relative;
  }

  /* Specular highlight on top edge */
  .glass-enabled .glass-full::before {
    content: '';
    position: absolute;
    top: 0;
    left: 5%;
    right: 5%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      hsla(0 0% 100% / var(--glass-highlight-opacity)),
      transparent
    );
    border-radius: inherit;
    pointer-events: none;
  }
}

/* Fallback when backdrop-filter not supported */
@supports not ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))) {
  .glass-enabled .glass,
  .glass-enabled .glass-subtle,
  .glass-enabled .glass-strong,
  .glass-enabled .glass-full {
    background: hsla(var(--glass-tint) / 0.95);
  }
}

/* ===============================================
 * AUTO-APPLY GLASS EFFECTS
 * Automatically transforms UI when glass is enabled
 * No component changes needed - toggle ON = glass UI
 * =============================================== */

@supports (backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px)) {
  /* === CARDS: All .bg-card elements get glass treatment === */
  .glass-enabled .bg-card {
    background: hsla(var(--glass-tint) / var(--glass-opacity)) !important;
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border-color: hsla(var(--glass-tint) / var(--glass-border-opacity)) !important;
    box-shadow: 
      0 0 var(--glass-glow-spread) hsla(var(--glass-glow-color) / calc(var(--glass-glow-opacity) * 0.5)),
      0 4px 20px rgba(0, 0, 0, 0.08);
  }

  /* === NAVIGATION & HEADERS === */
  .glass-enabled header,
  .glass-enabled nav,
  .glass-enabled [role="navigation"],
  .glass-enabled .navbar,
  .glass-enabled .header {
    background: hsla(var(--glass-tint) / var(--glass-opacity-subtle)) !important;
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
  }

  /* === SIDEBAR === */
  .glass-enabled aside,
  .glass-enabled [role="complementary"],
  .glass-enabled .sidebar {
    background: hsla(var(--glass-tint) / var(--glass-opacity)) !important;
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
  }

  /* === MODALS & DIALOGS === */
  .glass-enabled [role="dialog"],
  .glass-enabled [role="alertdialog"],
  .glass-enabled .modal,
  .glass-enabled .dialog {
    background: hsla(var(--glass-tint) / var(--glass-opacity)) !important;
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
    box-shadow: 
      0 0 calc(var(--glass-glow-spread) * 1.5) hsla(var(--glass-glow-color) / var(--glass-glow-opacity)),
      0 25px 50px rgba(0, 0, 0, 0.2);
  }

  /* === POPOVERS & DROPDOWNS === */
  .glass-enabled [role="menu"],
  .glass-enabled [role="listbox"],
  .glass-enabled .popover,
  .glass-enabled .dropdown-menu,
  .glass-enabled [data-radix-popper-content-wrapper] > div {
    background: hsla(var(--glass-tint) / var(--glass-opacity)) !important;
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    border-color: hsla(var(--glass-tint) / var(--glass-border-opacity)) !important;
  }

  /* === TOOLTIPS === */
  .glass-enabled [role="tooltip"] {
    background: hsla(var(--glass-tint) / var(--glass-opacity-strong)) !important;
    backdrop-filter: blur(var(--glass-blur-subtle));
    -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  }

  /* === PRIMARY BUTTONS get subtle glass === */
  .glass-enabled .bg-primary {
    background: hsla(var(--primary) / 0.85) !important;
    backdrop-filter: blur(var(--glass-blur-subtle));
    -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
    box-shadow: 
      0 0 calc(var(--glass-glow-spread) * 0.5) hsla(var(--glass-glow-color) / calc(var(--glass-glow-opacity) * 0.7)),
      0 2px 8px rgba(0, 0, 0, 0.15);
  }

  /* === SECONDARY/MUTED BACKGROUNDS === */
  .glass-enabled .bg-secondary {
    background: hsla(var(--glass-tint) / var(--glass-opacity-subtle)) !important;
    backdrop-filter: blur(var(--glass-blur-subtle));
    -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  }

  .glass-enabled .bg-muted {
    background: hsla(var(--glass-tint) / calc(var(--glass-opacity-subtle) + 0.05)) !important;
    backdrop-filter: blur(var(--glass-blur-subtle));
    -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  }

  /* === INPUT FIELDS === */
  .glass-enabled input:not([type="checkbox"]):not([type="radio"]):not([type="range"]),
  .glass-enabled textarea,
  .glass-enabled select {
    background: hsla(var(--glass-tint) / calc(var(--glass-opacity-subtle) + 0.1)) !important;
    backdrop-filter: blur(var(--glass-blur-subtle));
    -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  }

  /* === BADGES & PILLS === */
  .glass-enabled .badge,
  .glass-enabled .pill,
  .glass-enabled [class*="rounded-full"][class*="px-"] {
    backdrop-filter: blur(var(--glass-blur-subtle));
    -webkit-backdrop-filter: blur(var(--glass-blur-subtle));
  }

  /* === BOTTOM NAVIGATION (PWA) === */
  .glass-enabled .fixed.bottom-0,
  .glass-enabled [class*="fixed"][class*="bottom-0"] {
    background: hsla(var(--glass-tint) / var(--glass-opacity)) !important;
    backdrop-filter: blur(var(--glass-blur-strong));
    -webkit-backdrop-filter: blur(var(--glass-blur-strong));
  }

  /* === FLOATING ACTION BUTTONS === */
  .glass-enabled .fab,
  .glass-enabled [class*="fixed"][class*="rounded-full"] {
    backdrop-filter: blur(var(--glass-blur));
    -webkit-backdrop-filter: blur(var(--glass-blur));
    box-shadow: 
      0 0 var(--glass-glow-spread) hsla(var(--glass-glow-color) / var(--glass-glow-opacity)),
      0 4px 15px rgba(0, 0, 0, 0.2);
  }

  /* === SPECULAR HIGHLIGHT on main cards === */
  .glass-enabled .bg-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 10%;
    right: 10%;
    height: 1px;
    background: linear-gradient(
      90deg,
      transparent,
      hsla(0 0% 100% / calc(var(--glass-highlight-opacity) * 0.7)),
      transparent
    );
    pointer-events: none;
    z-index: 1;
  }

  /* Ensure cards have relative positioning for the highlight */
  .glass-enabled .bg-card {
    position: relative;
    overflow: hidden;
  }
}

/* === FALLBACK: When backdrop-filter not supported === */
@supports not ((backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px))) {
  .glass-enabled .bg-card,
  .glass-enabled .bg-secondary,
  .glass-enabled .bg-muted {
    /* Just slightly tint the background */
    background: hsla(var(--glass-tint) / 0.08) !important;
  }
}

/* === DISABLE AUTO-GLASS ON SPECIFIC ELEMENTS === */
/* Add .no-glass class to opt-out of auto-glass effects */
.glass-enabled .no-glass {
  background: hsl(var(--card)) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

.glass-enabled .no-glass::before {
  display: none !important;
}

/* Ambient glow effect (can be combined with any glass class) */
.glass-enabled .glass-glow {
  box-shadow: 
    0 0 var(--glass-glow-spread) hsla(var(--glass-glow-color) / var(--glass-glow-opacity)),
    0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

/* === TOUCH-FRIENDLY GLASS INTERACTIONS === */

/* Touch target sizing */
.glass-enabled .glass-touchable {
  min-height: 44px;
  min-width: 44px;
  -webkit-tap-highlight-color: transparent;
}

/* Touch feedback (mobile) */
.glass-enabled .glass-touchable:active {
  transform: scale(0.98);
  background: hsla(var(--glass-tint) / calc(var(--glass-opacity) + 0.1));
  transition: transform 0.1s ease, background 0.1s ease;
}

/* Hover effects only on devices that support hover */
@media (hover: hover) and (pointer: fine) {
  .glass-enabled .glass-interactive {
    transition: 
      box-shadow 0.3s ease,
      transform 0.2s ease,
      background 0.2s ease;
  }

  .glass-enabled .glass-interactive:hover {
    box-shadow: 
      0 0 calc(var(--glass-glow-spread) * 1.5) hsla(var(--glass-glow-color) / calc(var(--glass-glow-opacity) * 1.5)),
      0 12px 40px rgba(0, 0, 0, 0.15);
    transform: translateY(-2px);
  }

  .glass-enabled .glass-interactive:active {
    transform: translateY(0);
  }
}

/* Touch devices: simpler interaction */
@media (hover: none) {
  .glass-enabled .glass-interactive {
    transition: transform 0.15s ease, background 0.15s ease;
  }
  
  .glass-enabled .glass-interactive:active {
    transform: scale(0.97);
    background: hsla(var(--glass-tint) / calc(var(--glass-opacity) + 0.15));
  }
}

/* Focus states for glass elements */
.glass-enabled .glass:focus-visible,
.glass-enabled .glass-full:focus-visible,
.glass-enabled .glass-interactive:focus-visible {
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* === GLASS PERFORMANCE MODES === */

/* Reduced glass mode (low battery) */
.glass-performance-reduced {
  --glass-blur: 6px;
  --glass-blur-strong: 10px;
  --glass-glow-opacity: 0.05;
  --glass-opacity: 0.9;
}

/* Minimal glass mode (very low battery / data saver) */
.glass-performance-minimal {
  --glass-blur: 4px;
  --glass-blur-strong: 6px;
  --glass-glow-opacity: 0;
  --glass-glow-spread: 0;
  --glass-opacity: 0.95;
  --glass-highlight-opacity: 0;
}

/* Disable blur entirely in minimal mode */
.glass-performance-minimal .glass,
.glass-performance-minimal .glass-subtle,
.glass-performance-minimal .glass-strong,
.glass-performance-minimal .glass-full {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* === ACCESSIBILITY FALLBACKS === */

/* High contrast mode: solid backgrounds */
.high-contrast .glass,
.high-contrast .glass-subtle,
.high-contrast .glass-strong,
.high-contrast .glass-full {
  background: hsl(var(--card)) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* Reduced transparency preference */
@media (prefers-reduced-transparency: reduce) {
  .glass-enabled .glass,
  .glass-enabled .glass-subtle,
  .glass-enabled .glass-strong,
  .glass-enabled .glass-full {
    background: hsl(var(--card)) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
}

/* Reduced motion: disable animations */
@media (prefers-reduced-motion: reduce) {
  .glass-enabled .glass-interactive {
    transition: none !important;
    transform: none !important;
  }
  
  .glass-enabled .glass-touchable:active {
    transform: none !important;
  }
}

/* === PWA SAFE AREA GLASS COMPONENTS === */

/* Glass navigation with safe area */
.glass-enabled .glass-nav {
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Glass bottom bar with home indicator padding */
.glass-enabled .glass-bottom-bar {
  padding-bottom: calc(env(safe-area-inset-bottom) + 8px);
}

/* Glass bottom navigation for PWA */
.glass-enabled .glass-bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: hsla(var(--glass-tint) / var(--glass-opacity));
  backdrop-filter: blur(var(--glass-blur-strong));
  -webkit-backdrop-filter: blur(var(--glass-blur-strong));
  padding-bottom: env(safe-area-inset-bottom);
  border-top: var(--glass-border-width) solid hsla(var(--glass-tint) / var(--glass-border-opacity));
  z-index: var(--z-mobile-bottom-nav, 40);
}

/* Hide glass bottom nav on desktop (use sidebar instead) */
@media (min-width: 1024px) {
  .glass-enabled .glass-bottom-nav {
    display: none;
  }
}

/* ===============================================
 * GLASS ANIMATIONS
 * =============================================== */

/* Shimmer animation keyframes */
@keyframes glass-shimmer {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

/* Shimmer effect - subtle moving highlight */
.glass-enabled .glass-shimmer {
  position: relative;
  overflow: hidden;
}

.glass-enabled .glass-shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    hsla(0 0% 100% / 0.06) 45%,
    hsla(0 0% 100% / 0.1) 50%,
    hsla(0 0% 100% / 0.06) 55%,
    transparent 100%
  );
  background-size: 200% 100%;
  animation: glass-shimmer 3s ease-in-out infinite;
  pointer-events: none;
  border-radius: inherit;
}

/* Slower shimmer variant */
.glass-enabled .glass-shimmer-slow::after {
  animation-duration: 5s;
}

/* Faster shimmer variant */
.glass-enabled .glass-shimmer-fast::after {
  animation-duration: 2s;
}

/* One-time shimmer on hover */
@keyframes glass-shimmer-once {
  0% {
    background-position: -200% center;
  }
  100% {
    background-position: 200% center;
  }
}

.glass-enabled .glass-shimmer-hover {
  position: relative;
  overflow: hidden;
}

.glass-enabled .glass-shimmer-hover::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    hsla(0 0% 100% / 0.08) 45%,
    hsla(0 0% 100% / 0.15) 50%,
    hsla(0 0% 100% / 0.08) 55%,
    transparent 100%
  );
  background-size: 200% 100%;
  background-position: -200% center;
  pointer-events: none;
  border-radius: inherit;
  transition: none;
}

@media (hover: hover) {
  .glass-enabled .glass-shimmer-hover:hover::after {
    animation: glass-shimmer-once 0.6s ease-out forwards;
  }
}

/* Pulse glow animation */
@keyframes glass-pulse {
  0%, 100% {
    box-shadow: 
      0 0 var(--glass-glow-spread) hsla(var(--glass-glow-color) / var(--glass-glow-opacity)),
      0 8px 32px rgba(0, 0, 0, 0.12);
  }
  50% {
    box-shadow: 
      0 0 calc(var(--glass-glow-spread) * 1.5) hsla(var(--glass-glow-color) / calc(var(--glass-glow-opacity) * 1.5)),
      0 8px 32px rgba(0, 0, 0, 0.15);
  }
}

.glass-enabled .glass-pulse {
  animation: glass-pulse 2s ease-in-out infinite;
}

/* Disable animations when reduced motion is preferred */
@media (prefers-reduced-motion: reduce) {
  .glass-enabled .glass-shimmer::after,
  .glass-enabled .glass-shimmer-hover::after {
    animation: none !important;
    background-position: center !important;
  }
  
  .glass-enabled .glass-pulse {
    animation: none !important;
  }
}
